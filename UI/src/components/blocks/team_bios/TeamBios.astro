---
import { getCollection } from "astro:content";
import { CTAButton } from "@components/shared";

// single-member layout
const ourEstablishedTeam = await getCollection("team_profile");
const member = ourEstablishedTeam[0];
const { data } = member;

// âœ… render() gives you a Content component that outputs parsed Markdown/HTML
const { Content } = await member.render();
---

<html lang="en">
  <body class="bg-neutral-950 text-neutral-200 antialiased">
    <main class=" grid place-items-center p-6 md:p-10">
      <section class="w-full max-w-5xl">
        <article
          class="grid gap-8 md:gap-10 md:grid-cols-[1fr,2fr] items-center rounded-2xl border border-neutral-800/70 bg-neutral-900/60 p-6 md:p-10 shadow-xl"
        >
          <!-- Left: Portrait (horizontal, natural aspect ratio) -->
          <div class="justify-self-center md:justify-self-start w-full max-w-md">
            <figure
              class="relative overflow-hidden rounded-2xl ring-1 ring-white/10 group"
            >
              <!-- Primary picture -->
              <img
                src={data.primaryPicture.source}
                alt={data.primaryPicture.alt}
                class="w-full h-auto object-cover transition-opacity duration-500 ease-in-out group-hover:opacity-0 md:aspect-square md:h-full"
              />

              <!-- Secondary picture (hover fade-in) -->
              {data.secondaryPicture?.source && (
                <img
                  src={data.secondaryPicture.source}
                  alt={data.secondaryPicture.alt ?? `${data.teamName} alt photo`}
                  class="absolute inset-0 w-full h-full object-cover opacity-0 transition-opacity duration-500 ease-in-out group-hover:opacity-100 md:aspect-square"
                />
              )}
            </figure>
          </div>

          <!-- Right: Bio -->
          <div class="space-y-5 md:space-y-6">
            <header class="space-y-1">
              <h1 class="text-3xl md:text-4xl font-semibold tracking-tight text-white">
                {data.teamName}
              </h1>
              {data.title && (
                <p class="text-neutral-400 text-base md:text-lg">
                  {data.title}
                </p>
              )}
            </header>
            
            <div class="max-w-none text-[15px] md:text-base leading-relaxed
                        [&_p]:text-white [&_strong]:text-white [&_a]:text-white">
              <Content />
            </div>
              <!-- CTA Button -->
              {data.portfolioLink && (
                <div class="flex justify-center pt-2">
                  <CTAButton variant={"primary"} navigateTo={data.portfolioLink}>
                    <span class="text-header-3 relative z-[5] ">
                      Portfolio
                    </span>
                  </CTAButton>
                </div>
              )}
          </div>
        </article>
      </section>
    </main>
  </body>
</html>
